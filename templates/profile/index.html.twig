{% extends 'base.html.twig' %}

{% block title %}Hello ProfileController!
{% endblock %}

{% block body %}
	<style>
		.example-wrapper {
			margin: 1em auto;
			max-width: 800px;
			width: 95%;
			font: 18px / 1.5 sans-serif;
		}
		.example-wrapper code {
			background: #F5F5F5;
			padding: 2px 6px;
		}
	</style>

    <div>
    Hello {{ user.firstname }} {{ user.lastname }}!
    {% if access_token %}
    <a href="{{ path("music_vk") }}">Музыка пользователя</a>
    {% endif %}
    </div>

    <div class="example-wrapper">
        <h1>Привязка ВКонтакте</h1>
        <p>Нажмите на кнопку ниже, чтобы привязать свой аккаунт ВКонтакте.</p>
        <p>После привязки вы сможете использовать функционал, связанный с ВКонтакте.</p>

    </div>
	<button id="vk_button">Привязать ВК</button>

<script>
// 1. Get the button element by its ID
const myButton = document.getElementById('vk_button');
// 2. Define the function to be executed on the event
function handleClick() {
    const query = "?response_type=code" +
    "&client_id=53957545" +
    "&scope=email" +
    "&redirect_uri=http%3A%2F%2Flocalhost%2Fcallback_vk" +
    `&state=XXXRandomZZZ` +
    "&code_challenge=v6UszkUn_bsLQAZnsfZJXx1pXonxVJYua-58sSENi5s" +
    "&code_challenge_method=S256";
    location.assign('https://id.vk.com/authorize' + query);
}
// 3. Add the event listener to the button
myButton.addEventListener('click', handleClick);
</script>
{% endblock %}
